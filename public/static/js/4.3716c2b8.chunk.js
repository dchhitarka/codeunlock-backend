(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4,12],{46:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return i})),s.d(t,"a",(function(){return l}));var c=s(5),a=s(4),n=function(e,t){switch(t.type){case a.n:return{loading:!0};case a.i:return{posts:t.payload,loading:!1};case a.h:case"EDIT_POST":return Object(c.a)(Object(c.a)({},t.payload),{},{loading:!1});case a.o:case a.c:return Object(c.a)(Object(c.a)({},t.payload),{},{loading:!1});case a.f:return{msg:t.payload,loading:!1,error:!0};default:return e}},o=function(e,t){switch(t.type){case a.n:return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case a.k:return{tags:t.payload,loading:!1};case a.d:case a.j:case a.p:case a.f:return Object(c.a)(Object(c.a)({},t.payload),{},{loading:!1});default:return e}},i=function(e,t){switch(t.type){case a.n:return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case a.m:return t.payload;case a.l:return{user:t.payload,loading:!1};case a.e:case a.f:return{user:null,error:t.payload,loading:!1};case"STOP_LOADING":return Object(c.a)(Object(c.a)({},e),{},{loading:!1});default:return e}},l=function(e,t){switch(t.type){case a.g:case a.b:case a.a:case a.f:return t.payload;default:return e}}},512:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return x})),s.d(t,"Preview",(function(){return g}));var c=s(1),a=s.n(c),n=s(3),o=s(5),i=s(15),l=s(0),r=(s(68),s(6)),d=s(16),u=s(52),j=s(18),b=s(46),m=s(19),p=s(99),O=s(56),h=s(53),f=s(2);function x(e){var t,s,c,u,p=Object(l.useReducer)(b.b,null!==(t=e.location.state)&&void 0!==t?t:{loading:!0,id:null}),x=Object(i.a)(p,2),y=x[0],N=x[1],k=Object(l.useState)(!0),_=Object(i.a)(k,2),S=_[0],w=_[1],C=Object(l.useState)({post_title:"",post_body:"",post_image:"",post_status:0}),q=Object(i.a)(C,2),T=q[0],E=q[1],I=Object(l.useState)([]),D=Object(i.a)(I,2),A=D[0],P=D[1],L=Object(l.useState)(!1),R=Object(i.a)(L,2),B=R[0],U=R[1],F=Object(r.h)().post;return Object(l.useEffect)((function(){var e;Object(j.j)(F,N).then((function(e){var t,s=[];e.tags.map((function(e){return s.push(e.tag)})),console.log(T),P(s),E(Object(o.a)(Object(o.a)({},T),{},{post_body:y.post_body,post_title:y.post_title,post_status:parseInt(y.post_status),post_image:null!==(t=y.post_image)&&void 0!==t?t:""})),w(!1)})),document.title=(null!==(e=null===y||void 0===y?void 0:y.post_title)&&void 0!==e?e:window.location.pathname.split("/admin/posts/")[1].split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "))+" | Admin | Codeunlock.in"}),[]),Object(f.jsxs)("div",{className:"post-edit",children:[Object(f.jsxs)("div",{className:"popup",children:[(null===y||void 0===y?void 0:y.error)&&Object(f.jsx)(h.a,{msg:null===y||void 0===y?void 0:y.error,type:"error"}),(null===y||void 0===y?void 0:y.message)&&Object(f.jsx)(h.a,{message:null===y||void 0===y?void 0:y.message,type:"success"})]}),B&&Object(f.jsx)(g,{post:T,toggle:U}),S?Object(f.jsx)(m.a,{}):Object(f.jsxs)("form",{className:"post-form",onSubmit:function(){var e=Object(n.a)(a.a.mark((function e(t){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=[],document.querySelectorAll(".post_tags").forEach((function(e){return s.push(e.value)})),e.next=5,Object(j.v)(y.id,Object(o.a)(Object(o.a)({},T),{},{tags:s}),N);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(f.jsxs)("div",{className:"form-header",style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(f.jsx)("button",{className:"form-button",children:"UPDATE"}),Object(f.jsx)("div",{className:"form-heading",children:"POST"}),Object(f.jsx)(d.b,{to:"/admin/posts",children:Object(f.jsx)("button",{className:"form-button unactive-button",children:"BACK"})})]}),Object(f.jsxs)("div",{className:"admin-post-top",children:[Object(f.jsxs)("div",{className:"admin-post-top-left",children:[Object(f.jsxs)("div",{className:"form-input",children:[Object(f.jsx)("label",{className:"form-label",children:"Title"}),Object(f.jsx)("input",{type:"text",value:T.post_title,name:"post_title",id:"title",onChange:function(e){return E(Object(o.a)(Object(o.a)({},T),{},{post_title:e.target.value}))},required:!0})]}),Object(f.jsxs)("div",{className:"form-input",children:[Object(f.jsx)("label",{className:"form-label",children:"Status"}),Object(f.jsxs)("select",{name:"post_status",id:"post_status",onChange:function(e){return E(Object(o.a)(Object(o.a)({},T),{},{post_status:parseInt(e.target.value)}))},required:!0,children:[Object(f.jsx)("option",{value:"0",defaultValue:0===parseInt(T.post_status),selected:0===parseInt(T.post_status),children:"Draft"}),Object(f.jsx)("option",{value:"1",defaultValue:1===parseInt(T.post_status),selected:1===parseInt(T.post_status),children:"Published"})]})]}),Object(f.jsxs)("div",{className:"form-input",children:[Object(f.jsx)("label",{className:"form-label",children:"Image (Add Drive link where the image is stored)"}),Object(f.jsx)("input",{type:"text",value:null!==(s=null===T||void 0===T?void 0:T.post_image)&&void 0!==s?s:"https://drive.google.com/uc?export=view&id=",onChange:function(e){return E(Object(o.a)(Object(o.a)({},T),{},{post_image:e.target.value}))}})]})]}),Object(f.jsx)("div",{className:"admin-post-top-right",children:Object(f.jsx)("img",{src:T.post_image,onError:function(e){return e.target.src=O.a},id:"post_image",width:"200",height:"200",alt:"Post Cover"})})]}),Object(f.jsxs)("div",{className:"form-input",children:[Object(f.jsxs)("label",{className:"form-label",style:{display:"flex",justifyContent:"space-between"},children:[Object(f.jsx)("span",{children:"Body"}),Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{onClick:function(){return U(!0)},children:"Preview"}),Object(f.jsx)("div",{className:"words-count",style:{marginLeft:"10px",color:"grey",fontStyle:"italic",fontSize:"15px"},children:"".concat(null!==(c=null===y||void 0===y||null===(u=y.post_body)||void 0===u?void 0:u.split(" ").length)&&void 0!==c?c:0," words")})]})]}),Object(f.jsx)("textarea",{type:"text",rows:"40",value:T.post_body,name:"post_body",id:"post_body",onChange:function(e){return E(Object(o.a)(Object(o.a)({},T),{},{post_body:e.target.value}))},required:!0})]}),Object(f.jsxs)("div",{className:"form-input",children:[Object(f.jsx)("label",{className:"form-label",children:"Tags"}),Object(f.jsx)("div",{className:"tags-list",children:A.map((function(e,t){return Object(f.jsx)("input",{type:"text",value:e,name:"tags".concat(t),id:"tags".concat(t),onChange:function(){},className:"post_tags",required:!0},t)}))}),Object(f.jsxs)("div",{className:"action-buttons",children:[Object(f.jsx)("button",{className:"form-button",onClick:function(e){e.preventDefault();var t=document.createElement("INPUT");t.className="post_tags",document.querySelector(".tags-list").appendChild(t)},children:"ADD"}),Object(f.jsx)("button",{className:"form-button unactive-button",onClick:function(e){e.preventDefault();var t=document.querySelector(".tags-list");t.removeChild(t.lastElementChild)},children:"REMOVE"})]})]}),Object(f.jsxs)("div",{className:"all-comments form-input",children:[Object(f.jsx)("div",{className:"heading",style:{marginBottom:"10px"},children:"Comments"}),Object(f.jsx)(v,{postId:y.id})]})]})]})}var v=function(e){var t=e.postId,s=Object(l.useReducer)(b.a,[]),c=Object(i.a)(s,2),a=c[0],n=c[1];return Object(l.useEffect)((function(){Object(j.i)(t,n)}),[t]),0===a.length?Object(f.jsx)("div",{children:"No comments available"}):Object(f.jsxs)("table",{className:"table",style:{overflowX:"auto"},children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"table-col-heading",children:"Id"}),Object(f.jsx)("th",{className:"table-col-heading",children:"User"}),Object(f.jsx)("th",{className:"table-col-heading",children:"Comment"}),Object(f.jsx)("th",{className:"table-col-heading",children:"Likes"}),Object(f.jsx)("th",{className:"table-col-heading",children:"Date"}),Object(f.jsx)("th",{className:"table-col-heading",children:"Delete"})]})}),Object(f.jsx)("tbody",{children:a.map((function(e,s){return Object(f.jsxs)("tr",{className:"post-row",style:{overflowX:"scroll"},children:[Object(f.jsx)("td",{children:e.id}),Object(f.jsx)("td",{children:e.user.name}),Object(f.jsx)("td",{children:e.comment_body}),Object(f.jsx)("td",{children:e.comment_likes}),Object(f.jsx)("td",{children:Object(u.a)(e.created_at)}),Object(f.jsx)("td",{onClick:function(){return Object(j.d)(t,e.id,n)},children:"Delete"})]},s)}))})]})},g=function(e){var t=e.post,s=e.toggle;return Object(f.jsxs)("div",{style:{position:"fixed",top:"50px",bottom:"50px",left:"5%",margin:"25px 0",display:"flex",flexDirection:"column",zIndex:"100",backgroundColor:"white",border:"1px solid black",overflowY:"scroll",width:"90vw"},children:[Object(f.jsx)("button",{style:{position:"absolute",right:"0",top:"5px"},className:"form-button unactive-button",onClick:function(){return s(!1)},children:"CLOSE"}),Object(f.jsx)("div",{style:{marginTop:"250px"},children:Object(f.jsx)(p.PostBody,{post:t})})]})}},53:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s(0),s(55);var c=s(2);function a(e){var t=e.message,s=e.type;return t.includes("Successfully")&&(t="Post "+t.split(" ")[1]),Object(c.jsx)("div",{className:"inner",children:Object(c.jsx)("div",{className:"flash-messages",children:Object(c.jsxs)("div",{className:"flash flash--".concat(s),children:[Object(c.jsx)("p",{className:"flash__text",children:t}),Object(c.jsx)("button",{className:"flash__remove",onClick:function(e){return e.target.parentNode.parentNode.remove()},children:"\xd7"})]})})})}},55:function(e,t,s){},56:function(e,t,s){"use strict";t.a=s.p+"static/media/noimage.3684e37c.png"},61:function(e,t,s){},68:function(e,t,s){},99:function(e,t,s){"use strict";s.r(t),s.d(t,"PostBody",(function(){return y}));var c=s(17),a=s(5),n=s(15),o=s(0),i=s(6),l=s(16),r=s(69),d=s.n(r),u=s(46),j=s(18),b=s(52),m=(s(61),s(62),s(56)),p=s(19),O=s(53),h=s(14),f=s(527),x=s(513),v=s(2);function g(e){var t=e.post,s=Object(o.useContext)(h.a).userState,c=Object(o.useState)(void 0),l=Object(n.a)(c,2),r=l[0],d=l[1],b=Object(o.useState)(void 0),m=Object(n.a)(b,2),p=m[0],f=m[1],x=Object(o.useState)(void 0),g=Object(n.a)(x,2),y=g[0],N=g[1],k=Object(o.useReducer)(u.b,{likes:t.post_likes||0,bookmarks:t.post_bookmarks||0}),_=Object(n.a)(k,2),S=_[0],w=_[1],C=Object(o.useState)({like:0,bookmark:0}),q=Object(n.a)(C,2),T=q[0],E=q[1];Object(o.useEffect)((function(){var e;(null===(e=t.post_engagements)||void 0===e?void 0:e.length)>0&&E({like:parseInt(t.post_engagements[0].like),bookmark:parseInt(t.post_engagements[0].bookmark)})}),[t.post_engagements]);var I=Object(i.g)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"popup",children:[p&&Object(v.jsx)(O.a,{message:p,type:"success"}),y&&Object(v.jsx)(O.a,{message:y,type:"success"}),r&&Object(v.jsx)(O.a,{message:r,type:"success"})]}),Object(v.jsxs)("div",{className:"post-engage",children:[Object(v.jsxs)("div",{className:"action like",children:[Object(v.jsx)("div",{className:"post-like",onClick:function(){s.isAuthenticated?(document.querySelector(".like-icon").style.transform="scale(0.5, 0.5)",document.querySelector(".like-icon").style.transition="0.1s",setTimeout((function(){document.querySelector(".like-icon").style.transform="scale(1, 1)"}),100),Object(j.h)(w,t.id,s.id,"like").then((function(e){T.like?E((function(e){return Object(a.a)(Object(a.a)({},e),{},{like:0})})):E((function(e){return Object(a.a)(Object(a.a)({},e),{},{like:1})})),f(e.message),setTimeout((function(){return f(void 0)}),2500)}))):I.push("/u/login")},children:Object(v.jsx)("i",{className:1===T.like||!0===T.like?"fas fa-thumbs-up like-icon":"far fa-thumbs-up like-icon",children:Object(v.jsx)("abbr",{title:"Copy Link"})})}),Object(v.jsx)("div",{className:"stats",children:S.likes})]}),Object(v.jsxs)("div",{className:"action bookmark",children:[Object(v.jsx)("div",{className:"post-bookmark",onClick:function(){s.isAuthenticated?(document.querySelector(".bookmark-icon").style.transform="scale(0.5, 0.5)",document.querySelector(".bookmark-icon").style.transition="0.1s",setTimeout((function(){document.querySelector(".bookmark-icon").style.transform="scale(1, 1)"}),100),Object(j.h)(w,t.id,s.id,"bookmark").then((function(e){T.bookmark?E((function(e){return Object(a.a)(Object(a.a)({},e),{},{bookmark:0})})):E((function(e){return Object(a.a)(Object(a.a)({},e),{},{bookmark:1})})),N(e.message),setTimeout((function(){return N(void 0)}),2500)}))):I.push("/u/login")},children:Object(v.jsx)("i",{className:T.bookmark?"fas fa-bookmark bookmark-icon":"far fa-bookmark bookmark-icon"})}),Object(v.jsx)("div",{className:"book-stats",style:{paddingTop:"6px"},children:S.bookmarks})]}),Object(v.jsx)("div",{className:"action share",children:Object(v.jsx)("div",{className:"post-share",onClick:function(e){document.querySelector(".share-icon").style.transform="scale(0.5, 0.5)",document.querySelector(".share-icon").style.transition="0.25s",setTimeout((function(){document.querySelector(".share-icon").style.transform="scale(1, 1)"}),150);var t=window.location.href,s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("value",t),s.setAttribute("id","url-copy"),document.getElementsByTagName("body")[0].appendChild(s),s.select(),s.setSelectionRange(0,99999),document.execCommand("copy"),document.getElementsByTagName("body")[0].removeChild(s),document.querySelector(".share-icon").classList.remove("far"),document.querySelector(".share-icon").classList.add("fas"),setTimeout((function(){var e,t,s,c,a,n;null===(e=document)||void 0===e||null===(t=e.querySelector(".share-icon"))||void 0===t||null===(s=t.classList)||void 0===s||s.add("far"),null===(c=document)||void 0===c||null===(a=c.querySelector(".share-icon"))||void 0===a||null===(n=a.classList)||void 0===n||n.remove("fas")}),2500),d("Link copied successfully!"),setTimeout((function(){d(void 0)}),2500)},children:Object(v.jsx)("i",{className:"far fa-copy share-icon"})})})]})]})}function y(e){var t,s,n=e.post,o=["red","indigo","blue","green","yellow","orange","violet"];return Object(v.jsxs)("section",{className:"post",children:[Object(v.jsx)("h1",{className:"title",children:n.post_title}),Object(v.jsxs)("div",{className:"metadata",children:[Object(v.jsx)("div",{className:"post-date",style:{display:"flex",alignItems:"center"},children:Object(v.jsxs)("span",{children:["Published On: ",Object(b.a)(null!==(t=null===n||void 0===n?void 0:n.published_on)&&void 0!==t?t:null===n||void 0===n?void 0:n.created_at)]})}),Object(v.jsx)("div",{className:"post-tags",children:n.tags&&n.tags.map((function(e,t){return Object(v.jsx)(l.b,{to:"/tags/".concat(e.tag_slug),children:Object(v.jsx)("span",{className:"post-tag",onMouseOver:function(e){return e.target.style.opacity="0.8"},onMouseLeave:function(e){return e.target.style.opacity="1"},style:{backgroundColor:o[t]},children:"#".concat(e.tag)},t)},t)}))})]}),Object(v.jsx)("img",{className:"image",onError:function(e){e.target.src=m.a,e.target.style.display="none"},src:null!==(s=n.post_image)&&void 0!==s?s:"",alt:"Post"}),Object(v.jsx)("div",{className:"content",children:Object(v.jsx)(d.a,{children:n.post_body,components:{code:function(e){e.node;var t=e.inline,s=e.className,n=e.children,o=Object(c.a)(e,["node","inline","className","children"]),i=/language-(\w+)/.exec(s||"");return!t&&i?Object(v.jsx)(f.a,Object(a.a)({children:String(n).replace(/\n$/,""),style:x.a,language:i[1],PreTag:"div"},o)):Object(v.jsx)("code",Object(a.a)(Object(a.a)({className:s},o),{},{children:n}))}}})}),Object(v.jsx)("hr",{})]})}function N(e){var t=e.post,s=Object(o.useContext)(h.a).userState,l=Object(o.useReducer)(u.a,[]),r=Object(n.a)(l,2),m=r[0],p=r[1],O=Object(o.useState)(""),g=Object(n.a)(O,2),y=g[0],N=g[1],k=Object(i.g)();return Object(o.useEffect)((function(){Object(j.i)(t.id,p)}),[]),Object(v.jsxs)("section",{className:"comments",children:[Object(v.jsx)("h1",{children:"Discussion"}),Object(v.jsx)("span",{children:"You can use markdown in the comment box! :)"}),Object(v.jsxs)("form",{className:"new-comment",onSubmit:function(e){s.isAuthenticated?(e.preventDefault(),Object(j.a)({comment:y,postId:t.id},p),N("")):k.push("/u/login")},children:[Object(v.jsx)("textarea",{className:"comment-input",value:y,rows:"5",placeholder:"Share your thoughts!",onChange:function(e){return N(e.target.value)},required:!0}),Object(v.jsx)("div",{className:"comment-bottom",children:Object(v.jsx)("input",{type:"submit",value:"SHARE",className:"comment-submit"})})]}),Object(v.jsxs)("div",{className:"all-comments",children:[m.length>0&&Object(v.jsxs)("h2",{style:{padding:"4px"},children:[m.length," Comments",Object(v.jsx)("hr",{})]}),m.length>0&&m.map((function(e,t){return Object(v.jsxs)("div",{className:"comment-box",children:[Object(v.jsxs)("div",{className:"comment-author",children:[Object(v.jsx)("img",{src:e.user.avatar,width:"30",height:"30",alt:"User",className:"avatar"}),Object(v.jsx)("div",{className:"author",children:e.user.name}),Object(v.jsx)("div",{className:"comment-date",children:Object(b.a)(e.created_at)})]}),Object(v.jsx)("div",{style:{margin:2,padding:5},children:Object(v.jsx)(d.a,{children:e.comment_body,components:{code:function(e){e.node;var t=e.inline,s=e.className,n=e.children,o=Object(c.a)(e,["node","inline","className","children"]),i=/language-(\w+)/.exec(s||"");return!t&&i?Object(v.jsx)(f.a,Object(a.a)({children:String(n).replace(/\n$/,""),style:x.a,language:i[1],PreTag:"div"},o)):Object(v.jsx)("code",Object(a.a)(Object(a.a)({className:s},o),{},{children:n}))}}})})]},t)}))]})]})}t.default=function(){var e,t=Object(o.useContext)(h.a).userState,s=Object(i.h)().postSlug,c=Object(o.useReducer)(u.b,{loading:!0}),a=Object(n.a)(c,2),l=a[0],r=a[1];return document.title="".concat(null!==(e=null===l||void 0===l?void 0:l.post_title)&&void 0!==e?e:window.location.pathname.split("/posts/")[1].split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ")," | CodeUnlock.in"),Object(o.useEffect)((function(){Object(j.j)(s,r,t.isAuthenticated)}),[t.isAuthenticated]),Object(v.jsxs)(v.Fragment,{children:[l.loading&&Object(v.jsx)(p.a,{}),!l.loading&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g,{post:l}),Object(v.jsx)(y,{post:l}),Object(v.jsx)(N,{post:l})]})]})}}}]);
//# sourceMappingURL=4.3716c2b8.chunk.js.map