import{r as i,U as N,u as q,j as e,o as S}from"./index-DcZMDsWX.js";/* empty css              */import{p as C}from"./Reducers-FdYVeQEV.js";import{P as l}from"./Popup-bydbHcy1.js";function A({post:t}){const n=i.useContext(N).user,[m,u]=i.useState(void 0),[d,k]=i.useState(void 0),[p,y]=i.useState(void 0),[h,f]=i.useReducer(C,{likes:t.post_likes||0,bookmarks:t.post_bookmarks||0}),[r,c]=i.useState({like:0,bookmark:0});i.useEffect(()=>{var o;((o=t.post_engagements)==null?void 0:o.length)>0&&c({like:parseInt(t.post_engagements[0].like),bookmark:parseInt(t.post_engagements[0].bookmark)})},[t.post_engagements]);const b=q();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"popup",children:[d&&e.jsx(l,{message:d,type:"success"}),p&&e.jsx(l,{message:p,type:"success"}),m&&e.jsx(l,{message:m,type:"success"})]}),e.jsxs("div",{className:"post-engage",children:[e.jsxs("div",{className:"action like",children:[e.jsx("div",{className:"post-like",onClick:()=>{n.isAuthenticated?(document.querySelector(".like-icon").style.transform="scale(0.5, 0.5)",document.querySelector(".like-icon").style.transition="0.1s",setTimeout(()=>{document.querySelector(".like-icon").style.transform="scale(1, 1)"},100),S(f,t.id,n.id,"like").then(o=>{r.like?c(s=>({...s,like:0})):c(s=>({...s,like:1})),k(o.message),setTimeout(()=>k(void 0),2500)})):b.push("/u/login")},children:e.jsx("i",{className:r.like===1||r.like===!0?"fas fa-thumbs-up like-icon":"far fa-thumbs-up like-icon",children:e.jsx("abbr",{title:"Copy Link"})})}),e.jsx("div",{className:"stats",children:h.likes})]}),e.jsxs("div",{className:"action bookmark",children:[e.jsx("div",{className:"post-bookmark",onClick:()=>{n.isAuthenticated?(document.querySelector(".bookmark-icon").style.transform="scale(0.5, 0.5)",document.querySelector(".bookmark-icon").style.transition="0.1s",setTimeout(()=>{document.querySelector(".bookmark-icon").style.transform="scale(1, 1)"},100),S(f,t.id,n.id,"bookmark").then(o=>{r.bookmark?c(s=>({...s,bookmark:0})):c(s=>({...s,bookmark:1})),y(o.message),setTimeout(()=>y(void 0),2500)})):b.push("/u/login")},children:e.jsx("i",{className:r.bookmark?"fas fa-bookmark bookmark-icon":"far fa-bookmark bookmark-icon"})}),e.jsx("div",{className:"book-stats",style:{paddingTop:"6px"},children:h.bookmarks})]}),e.jsx("div",{className:"action share",children:e.jsx("div",{className:"post-share",onClick:o=>{document.querySelector(".share-icon").style.transform="scale(0.5, 0.5)",document.querySelector(".share-icon").style.transition="0.25s",setTimeout(()=>{document.querySelector(".share-icon").style.transform="scale(1, 1)"},150);let s=window.location.href,a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("value",s),a.setAttribute("id","url-copy"),document.getElementsByTagName("body")[0].appendChild(a),a.select(),a.setSelectionRange(0,99999),document.execCommand("copy"),document.getElementsByTagName("body")[0].removeChild(a),document.querySelector(".share-icon").classList.remove("far"),document.querySelector(".share-icon").classList.add("fas"),setTimeout(()=>{var g,x,v,j;(x=(g=document==null?void 0:document.querySelector(".share-icon"))==null?void 0:g.classList)==null||x.add("far"),(j=(v=document==null?void 0:document.querySelector(".share-icon"))==null?void 0:v.classList)==null||j.remove("fas")},2500),u("Link copied successfully!"),setTimeout(()=>{u(void 0)},2500)},children:e.jsx("i",{className:"far fa-copy share-icon"})})})]})]})}export{A as default};
