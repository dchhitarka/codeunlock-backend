{"version":3,"sources":["components/Api/Reducers.js","components/Tags/Tag.js","components/Utility/Popup.js","images/noimage.png","components/Posts/PostCard.js"],"names":["postReducer","state","action","type","ActionType","loading","posts","payload","msg","error","tagReducer","tags","userReducer","user","commentReducer","TagView","useContext","UserContext","userState","useReducer","engagements","tag","dispatch","document","title","window","location","pathname","split","history","useHistory","slug","useParams","useEffect","fetchTag","useState","follows","followers","message","status","setStatus","find","u","user_id","id","className","onClick","isAuthenticated","followTag","then","res","push","description","post_count","length","map","post","index","style","fontStyle","Popup","includes","e","target","parentNode","remove","PostCard","undefined","bookmarked","setBookmarked","innerWidth","body","setBody","like","bookmark","engage","setEngage","eng","post_engagements","post_eng","parseInt","linkProp","post_slug","resizeBody","addEventListener","removeEventListener","colors","to","onError","src","noimage","post_image","alt","post_title","children","post_body","substring","skipHtml","slice","tag_slug","onMouseOver","opacity","onMouseLeave","backgroundColor","padding","fontWeight","formatDate","published_on","querySelector","transform","transition","setTimeout","engagePost","color"],"mappings":"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","file":"static/js/10.5e395c04.chunk.js","sourcesContent":["import * as ActionType from './ActionTypes'\n\nexport const postReducer = (state, action) => {\n    switch(action.type){\n        case ActionType.LOADING:\n            return {loading: true}\n        case ActionType.FETCH_POSTS:\n            return {posts: action.payload, loading: false}\n        case ActionType.FETCH_POST:\n            return {...action.payload, loading: false}\n        case \"EDIT_POST\":\n            return {...action.payload, loading: false}\n        case ActionType.POST_ENGAGE:\n        case ActionType.DELETE_POST:\n            return {...action.payload, loading: false}\n        case ActionType.FAILED:\n            return {msg: action.payload, loading: false, error: true}\n        default:\n            return state\n    }\n}\n\nexport const tagReducer = (state, action) => {\n    switch(action.type){\n        case ActionType.LOADING:\n            return {...state, loading: true}\n        case ActionType.FETCH_TAGS:\n            return {tags: action.payload, loading: false}\n        case ActionType.DELETE_TAG:\n        case ActionType.FETCH_TAG:\n        case ActionType.TAG_ENGAGE:\n        case ActionType.FAILED:\n            // console.log(action.payload)\n            return {...action.payload, loading: false}\n        default:\n            return state\n    }\n}\n\nexport const userReducer = (state, action) => {\n    switch(action.type){\n        case ActionType.LOADING:\n            return {...state, loading: true}\n        case ActionType.FETCH_USERS:\n            return action.payload\n        case ActionType.FETCH_USER:\n            return {user: action.payload, loading: false}\n        case ActionType.DELETE_USER:\n        case ActionType.FAILED:\n            return {user: null, error: action.payload, loading: false}\n        case \"STOP_LOADING\":\n            return { ...state, loading: false }\n        default:\n            return state\n    }\n}\n\nexport const commentReducer = (state, action) => {\n    switch(action.type){\n        // case ActionType.LOADING:\n        //     return {...state, loading: true}\n        case ActionType.FETCH_COMMENTS:\n        case ActionType.DELETE_COMMENT:\n        case ActionType.ADD_COMMENT:\n        case ActionType.FAILED:\n            return action.payload\n        default:\n            return state\n    }\n}","import React, { useReducer, useEffect, useState, useContext } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\nimport {fetchTag, followTag} from \"../Api/ActionCreators\"\nimport {tagReducer} from '../Api/Reducers';\nimport Loading from \"../Utility/Loading\"\nimport '../../css/Tags.css'\nimport PostCard from '../Posts/PostCard';\nimport { UserContext } from '../Context';\n\nexport default function TagView(){\n    const user = useContext(UserContext).userState;\n    const [tag, dispatch] = useReducer(tagReducer, {loading: true, engagements: []}) \n    document.title = \"#\" + window.location.pathname.split(\"/tags/\")[1] + \" | Tags | CodeUnlock.in\";\n    const history = useHistory()\n    const {slug} = useParams()\n\n    useEffect(() => {\n        fetchTag(dispatch, slug)\n    }, [slug])\n\n    const [status, setStatus] = useState(() => {\n        return {\n            follows: false,\n            followers: 0,\n            message: \"\"\n        }\n    })\n\n    useEffect(() => {\n        let follows = tag.engagements.find(u => u.user_id === user.id)\n        setStatus({\n            follows: follows ? true : false,\n            followers: tag.followers,\n            message: \"\"\n        })\n    // eslint-disable-next-line\n    }, [tag])\n\n    return (\n        <div className=\"tag-view\">\n            {tag.loading ? <Loading />\n            :<>\n                <div className=\"tag-header\">\n                    <div className=\"tag-name\">#{tag.tag}</div>\n                    <button\n                        onClick={() => {\n                            if(user.isAuthenticated){\n                                followTag(tag.id, user.id).then(res => {\n                                    status.follows ? setStatus(res) : setStatus(res)\n                                })\n                            }\n                            else {\n                                history.push('/login')\n                            }\n                        }}\n                        className={status.follows ? `form-button active-button follow-tag` : `form-button unactive-button follow-tag`}\n                    >\n                        {status.follows ? \"FOLLOWING\" : \"FOLLOW\"}\n                    </button>\n                </div>\n                <div className=\"tag-body\">\n                    <div className=\"tag-desc\">{tag.description != null ? tag.description : <span className=\"no-desc\">No description available!</span>}</div>\n                    <div className=\"post_count\">{tag.post_count} Posts | {status.followers || 0} Followers</div> \n                </div>\n                <div className=\"tag-posts\">\n                    <div className=\"tag-posts-head\">POSTS</div>\n                    {tag.posts.length > 0 && tag.posts.map((post, index) => \n                        <PostCard post={post} key={index} index={index} />\n                    )}\n                    {tag.posts.length === 0 && <div style={{fontStyle: \"italic\"}}>No post available!</div>}\n                </div>\n            </>\n            }\n        </div>\n    )\n}","import React from 'react';\nimport '../../css/Popup.css';\n\nexport default function Popup({message, type}){\n    if (message.includes('Successfully')) message = 'Post ' + message.split(' ')[1];\n    return (\n        <div className=\"inner\">\n            <div className=\"flash-messages\">\n                <div className={`flash flash--${type}`}>\n                    <p className=\"flash__text\">{message}</p>\n                    <button className=\"flash__remove\" onClick={e => e.target.parentNode.parentNode.remove()}>&times;</button>  \n                </div>\n            </div>\n        </div>          \n    )\n}","export default __webpack_public_path__ + \"static/media/noimage.3684e37c.png\";","import React, { useState, useEffect, useReducer, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport ReactMarkdown from 'react-markdown';\nimport '../../css/Posts.css';\nimport '../../css/fontawesome/css/all.css';\n// import noimage from '../../images/noimage.png'\nimport {formatDate} from '../Hooks';\nimport {engagePost} from '../Api/ActionCreators';\nimport {postReducer} from '../Api/Reducers';\nimport { UserContext } from '../Context';\nimport Popup from '../Utility/Popup';\nimport noimage from '../../images/noimage.png';\n\nfunction PostCard({post, index}) {\n    const user = useContext(UserContext).userState;\n\n    // eslint-disable-next-line\n    const [activity, dispatch] = useReducer(postReducer, {})\n    const [bookmarked, setBookmarked] = useState(undefined)\n\n    const [body, setBody] = useState(() => {\n        return window.innerWidth <= 767 ? 125 : 175    \n    })\n\n    const [engage, setEngage] = useState({\n        like: false,\n        bookmark: false\n    })\n    \n    useEffect(() => {\n        if(user.isAuthenticated){\n        let eng = post.post_engagements.find(post_eng => parseInt(post_eng.user_id) === parseInt(user.id))\n            if(eng)\n                setEngage({...engage, like: parseInt(eng.like), bookmark: parseInt(eng.bookmark)})\n        }\n    // eslint-disable-next-line\n    }, [post.post_engagements])\n\n    let history = useHistory();\n    \n    const linkProp = {\n        pathname: `/posts/${post.post_slug}`,\n        state: {...post}\n    }\n    \n    const bigTitleDiff = (title) => title.length > 60 ? 60 : 0\n    useEffect(() => {\n        const resizeBody = () => {\n            if (window.innerWidth <= 600)\n                setBody(100)\n            else //if (window.innerWidth > 768)\n                setBody(200)    \n        }\n        window.addEventListener('resize', resizeBody)\n        return () => window.removeEventListener('resize', resizeBody);    \n    }, [])\n\n    const colors = [\"red\", \"indigo\", \"blue\", \"green\", \"yellow\", \"orange\", \"violet\"];\n    return (\n        <>\n        {bookmarked && <Popup message={bookmarked ?? 'Testing'} type=\"success\"/>}\n        <div key={index} className=\"post-card\">\n            <Link to={linkProp}>\n                <img className=\"post-img\" onError={e => e.target.src = noimage} src={post.post_image ?? noimage} alt=\"\"/>\n            </Link>\n            <div className=\"post-data\">\n                <Link to={linkProp} className=\"post-title-link\">\n                    <div className=\"post-title\">{post.post_title}</div>\n                </Link>\n                <Link to={linkProp} className=\"post-content-link\">\n                    <ReactMarkdown className=\"post-content\" children={`${post.post_body.substring(0, body - bigTitleDiff(post.post_title))}...`} skipHtml={true} />\n                </Link>\n                <div className=\"post-tags\">\n                    {post.tags.slice(0,2).map((tag, index) => (\n                        <Link to={`/tags/${tag.tag_slug}`} key={index}>\n                            <span className=\"post-tag\" \n                                  onMouseOver={e => e.target.style.opacity = \"0.8\"} \n                                  onMouseLeave={e => e.target.style.opacity = \"1\"} \n                                  style={{backgroundColor: colors[index]}} key={index}>{`#${tag.tag}`}\n                            </span>\n                        </Link>\n                    ))}\n                    {post.tags.length-2 > 0 ? <span style={{padding: \"2px\", fontWeight: \"bold\"}}>+{post.tags.length-2}</span> : ''}\n                </div>\n                <div className=\"post-meta\">\n                    <div className=\"post-date\">Published On: {formatDate(post.published_on)}</div>\n                    <div className=\"engage-post\">\n                        <div className=\"posts post-bookmark\"\n                            onClick={() => {\n                                if(user.isAuthenticated){\n                                    document.querySelector(`.bookmark-icon-${index}`).style.transform = \"scale(0.5, 0.5)\"\n                                    document.querySelector(`.bookmark-icon-${index}`).style.transition = \"0.1s\"\n                                    setTimeout(() => {\n                                        document.querySelector(`.bookmark-icon-${index}`).style.transform = \"scale(1, 1)\"\n                                    }, 100)\n                                    \n                                    engagePost(dispatch, post.id, user.id, \"bookmark\").then(res => {\n                                        engage.bookmark ? setEngage(eng => ({...eng, bookmark: 0})) : setEngage(eng => ({...eng, bookmark: 1}))\n                                        setBookmarked(res.message);\n                                        setTimeout(() => setBookmarked(undefined), 2500);\n                                    })\n                                }\n                                else{\n                                    history.push(\"/u/login\");\n                                }\n                            }}\n                        >\n                            <i className={engage.bookmark === 1 || engage.bookmark === true  ? `fas fa-bookmark bookmark-icon-${index}` : `far fa-bookmark bookmark-icon-${index}`} style={{color: 'black'}}></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </>\n    )\n}\n\nexport default PostCard;"],"sourceRoot":""}