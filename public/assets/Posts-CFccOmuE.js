import{r as d,i as m,j as e,c as x,L as i,n as h,p as j}from"./index-DcZMDsWX.js";import{p as o}from"./Reducers-FdYVeQEV.js";function N(t){document.title="Posts | Admin | CodeUnlock.in";const[a,n]=d.useReducer(o,{posts:[{id:"",post_title:"",create_at:"",post_likes:"",post_bookmarks:""}],loading:!0});d.useEffect(()=>{m(n,null,"admin")},[]);const[c,s]=d.useReducer(o,{message:""});return e.jsx("main",{children:a.loading?e.jsx(x,{}):e.jsxs(e.Fragment,{children:[e.jsx(i,{to:"/admin/post/create",children:e.jsx("button",{className:"form-button active-button",children:"NEW POST"})}),e.jsx(i,{to:"/admin",children:e.jsx("button",{className:"form-button unactive-button",children:"BACK"})}),e.jsx("div",{className:"message",children:c.message}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-col-heading",children:"Id"}),e.jsx("th",{className:"table-col-heading",children:"Edit"}),e.jsx("th",{className:"table-col-heading",children:"Title"}),e.jsx("th",{className:"table-col-heading",children:"Status"}),e.jsx("th",{className:"table-col-heading",children:"Created On"}),e.jsx("th",{className:"table-col-heading",children:"Published On"}),e.jsx("th",{className:"table-col-heading",children:"Likes"}),e.jsx("th",{className:"table-col-heading",children:"Saves"}),e.jsx("th",{className:"table-col-heading",children:"Comments"}),e.jsx("th",{className:"table-col-heading",children:"Tags"}),e.jsx("th",{className:"table-col-heading",children:"Delete"})]})}),e.jsx("tbody",{children:e.jsx(u,{posts:a.posts,props:t,dispatchDelete:s})})]})]})})}const u=({posts:t,props:a,dispatchDelete:n})=>{const c=s=>{let l=[];return s&&s.forEach(r=>{l.push(r.tag)}),l.join(", ")};return t==null?void 0:t.map((s,l)=>e.jsxs("tr",{className:"post-row",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:e.jsx(i,{to:{pathname:`${a.match.path}/${s.post_slug}`,state:s},children:e.jsx("i",{className:"fas fa-edit"})})}),e.jsx("td",{children:s.post_title}),e.jsx("td",{children:parseInt(s.post_status)===0?"Draft":"Published"}),e.jsx("td",{children:h(s.created_at)}),e.jsx("td",{children:s.published_on?h(s.published_on):"Not Published"}),e.jsx("td",{children:s.post_likes}),e.jsx("td",{children:s.post_bookmarks}),e.jsx("td",{children:s.comments_count}),e.jsx("td",{children:c(s.tags)}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>{j(s.id,n).then(r=>window.location.reload())},children:e.jsx("i",{className:"fas fa-trash-alt"})})]},l))};export{N as default};
