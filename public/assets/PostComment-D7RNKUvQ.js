import{r as a,U as g,u as p,t as v,j as e,Q as f,n as y}from"./index-DcZMDsWX.js";import{R as N}from"./react-markdown-Bh_9KXKW.js";import{c as C}from"./Reducers-FdYVeQEV.js";import{S as b,a as S}from"./a11y-dark-upxbRWMY.js";function H({post:n}){const u=a.useContext(g).user,[t,r]=a.useReducer(C,[]),[m,o]=a.useState(""),h=p();return a.useEffect(()=>{v(n.id,r)},[]),e.jsxs("section",{className:"comments",children:[e.jsx("h1",{children:"Discussion"}),e.jsx("span",{children:"You can use markdown in the comment box! :)"}),e.jsxs("form",{className:"new-comment",onSubmit:s=>{u.isAuthenticated?(s.preventDefault(),f({comment:m,postId:n.id},r),o("")):h.push("/u/login")},children:[e.jsx("textarea",{className:"comment-input",value:m,rows:"5",placeholder:"Share your thoughts!",onChange:s=>o(s.target.value),required:!0}),e.jsx("div",{className:"comment-bottom",children:e.jsx("input",{type:"submit",value:"SHARE",className:"comment-submit"})})]}),e.jsxs("div",{className:"all-comments",children:[t.length>0&&e.jsxs("h2",{style:{padding:"4px"},children:[t.length," Comments",e.jsx("hr",{})]}),t.length>0&&t.map((s,x)=>e.jsxs("div",{className:"comment-box",children:[e.jsxs("div",{className:"comment-author",children:[e.jsx("img",{src:s.user.avatar,width:"30",height:"30",alt:"User",className:"avatar"}),e.jsx("div",{className:"author",children:s.user.name}),e.jsx("div",{className:"comment-date",children:y(s.created_at)})]}),e.jsx("div",{style:{margin:2,padding:5},children:e.jsx(N,{children:s.comment_body,components:{code({node:w,inline:j,className:c,children:i,...d}){const l=/language-(\w+)/.exec(c||"");return!j&&l?e.jsx(b,{children:String(i).replace(/\n$/,""),style:S,language:l[1],PreTag:"div",...d}):e.jsx("code",{className:c,...d,children:i})}}})})]},x))]})]})}export{H as default};
